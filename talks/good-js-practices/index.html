
<!DOCTYPE html>
<!--
  Copyright 2011 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Chrome DevRel Team (chrome-devrel@googlegroups.com)
                 Alex Russell (slightlyoff@chromium.org)
                 Brad Neuberg
-->
<html manifest="cache.appcache">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge;chrome=1" />
    <title>HTML5 Presentation</title>
    <link href="http://fonts.googleapis.com/css?family=Droid+Sans|Droid+Sans+Mono" rel="stylesheet" type="text/css" />
    <link id="prettify-link" href="src/prettify/prettify.css" rel="stylesheet" disabled />
    <link href="css/moon.css" class="theme" rel="stylesheet" />
    <link href="css/sand.css" class="theme" rel="stylesheet" />
    <link href="css/sea_wave.css" class="theme" rel="stylesheet" />
    <link href="css/default.css" class="theme" rel="stylesheet" media="screen"  />
    <link href="css/common.css" rel="stylesheet" media="screen" />
  </head>
  <body>
    <nav id="helpers">
      <button title="Previous slide" id="nav-prev" class="nav-prev">⇽</button> 
      <button title="Jump to a random slide" id="slide-no">5</button> 
      <button title="Next slide" id="nav-next" class="nav-next">⇾</button>
      <menu>
        <button type="checkbox" data-command="toc" title="Table of Contents" class="toc">TOC</button>
        <!-- <button type="checkbox" data-command="resources" title="View Related Resources">☆</button> -->
        <button type="checkbox" data-command="notes" title="View Slide Notes">✏</button>
        <button type="checkbox" data-command="source" title="View slide source">↻</button>
        <button type="checkbox" data-command="help" title="View Help">?</button>
      </menu>
    </nav>
    <div class="presentation">
      <div id="presentation-counter">Loading...</div>
      <div class="slides">
        <div class="slide" id="landing-slide">
          <style>
            #landing-slide p {
              font-size: 35px;
            }
            p#disclaimer-message {
              font-size: 20px;
            }
          </style>
          <section class="middle">
            <p>This presentation is an HTML5 website</p>
            <p>Press <span id="left-init-key" class="key">&rarr;</span> key to advance.</p>
            <p id="disclaimer-message">Having issues seeing the presentation? Read the <a href="disclaimer.html">disclaimer</a></p>
          </section>
          <aside class="note">
            <section>
              Welcome! (This field is for presenter notes and commentary.)
            </section>
          </aside> 
        </div>

        <div class="slide" id="controls-slide">
          <header>Slides controls</header>
          <style>
            #controls-slide li, #controls-slide p {
              font-size: 32px;
            }
            #controls-slide .key {
              bottom: 2px;
            }
          </style>
          <section>
            <ul>
              <li><span class="key">&larr;</span> and <span class="key">&rarr;</span> to move around.</li>
              <li><span class="key">Ctrl/Command</span> and <span class="key">+</span> or <span class="key">-</span> to zoom in and out.</li>
              <li><span class="key">S</span> to view page source.</li>
              <li><span class="key">T</span> to change the theme.</li>
              <li><span class="key">H</span> to toggle syntax highlight.</li>
              <li><span class="key">N</span> to toggle speaker notes.</li>
              <li><span class="key">3</span> to toggle 3D effect.</li>
              <li><span class="key">0</span> to toggle help.</li>
            </ul>
          </section>
        </div>

        <div class="slide" id="tips">
          <header>Slide Notes</header>
          <section>
            <p>When you see the '✎' in the title of the slide you can click on it to launch jsFiddle to run the associated code example.</p>
            <p>Once you launch the jsFiddle you can remove the embedded/... from the URL if you want to tweak the results and play with the code.
            <ul>
              <li>http://jsfiddle.net/ng4Qt/embedded/js,html,css,result/presentation/</li>
              c<li>http://jsfiddle.net/ng4Qt</li>
            </ul></p>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>

        <div class="slide" id="title-slide">
          <style>
            #title-slide h1, #title-slide h2 {
              color: black;
            }
            #title-slide h1 {
              letter-spacing: -2px;
              font-size: 96px;
            }
            #title-slide h2 {
              margin-top: -5px;
              font-size: 40px;
              letter-spacing: -1px;
            }
            #title-slide p {
              line-height: 35px;
              padding-left: 200px;
              padding-right: 200px;
            }
          </style>
          <section class="middle">
            <hgroup>
              <h1>
                Extending Your jQuery App with AmplifyJS
              </h1>
              <h2>
                by Elijah Manor
              </h2>
            </hgroup>
            <p>Taking an existing web application and slowing adding 3 AmplifyJS components</p>
          </section>
        </div>

        <div class="slide" id="amplifyJs">
          <header>AmplifyJS JavaScript Library</header>
          <section>
            <p>AmplifyJS is a set of components designed to solve common web application problems with a simplistic API. </p>
            <ul>
              <li>Client Side Component Communication (publish/subscribe) </li>
              <li>Client Side Browser &amp; Mobile Device Storage (store)</li>
              <li>Ajax Request Managment (request)</li>
            </ul>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>

        <div class="slide" id="agenda">
          <header>Today We Will...</header>
          <section>
              <p>Show an example of a <em>typical</em> web application that you may encounter</p>
              <p>Show how to <em>extend</em> the application with <a href="http://amplifyjs.com">AmplifyJS</a></p>
              <p>Show how to <em>easily</em> mock web service calls to let you continue developing the font-end</p>
              <p>Show an easy approach to <em>unit test</em> your code</p>
              <!--<p>Show a helpful tool to help you <em>quickly prototype</em> your user interface</p>-->
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>

        <div class="slide" id="challenge">
          <header>Front-End Challenge</header>
          <section>
            <p>As your application grows you will find that it is important to abstract the various pieces of your implementation to help you easily extend the functionality and make it less painful to maintain.</p>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>

        <div class="slide" id="appBefore">
          <header>Hacker News Web Application <a href="http://jsfiddle.net/ng4Qt/embedded/js,html,css,result/presentation/" target="_blank">✎</a></header>
          <section>
<pre style="overflow-y: scroll; height: 525px;">
var hackerNews = (function( $, undefined ) {
    var pub = {};

    pub.init = function() {
        $( &quot;#btnRefresh&quot; ).live( &quot;click&quot;, function() {
            pub.getAndDisplayNews();
        });        
    };

    pub.getAndDisplayNews = function() {
        $.mobile.pageLoading();  

        getNews( function( data ) {
            displayNews( data );    

            $.mobile.pageLoading( true ); 
        });
    };

    function getNews( callback ) { 
        $.<b>ajax</b>({
            <b>url</b>: &quot;http://api.ihackernews.com/page?format=jsonp&quot;,
            <b>dataType</b>: &quot;jsonp&quot;,
            <b>success</b>: function( data, textStatus, jqXHR ) {
                if ( callback ) callback ( data );
            },
            <b>error</b>: function( jqXHR, textStatus, errorThrown ) {
                console.log( textStatus + &quot;: &quot; + errorThrown );
            }
        });                
    }

    function displayNews( news ) {
        var newsList = $( &quot;#hackerNews&quot; ).find( &quot;.newsList&quot; );

        newsList.empty();
        $( &quot;#newsItem&quot; ).tmpl( news.items ).<b>appendTo</b>( newsList );
        newsList.listview( &quot;refresh&quot; );        
        $( &quot;#itemCount&quot; ).<b>text</b>( news.items.length );        
    }

    return pub;
}( jQuery ));

hackerNews.init();
hackerNews.getAndDisplayNews();
</pre>
          </section>
          <aside class="note">
            <section>
              <p>The implementation uses a lot of best practices such as: 
                <ul>
                  <li>IIFE</li> 
                  <li>public and private methods</li>
                  <li>small methods with focused purpose</li>
                  <li>etc...</li>
                </ul>
              </p>
              <p>However, there the various portions of the UI are tightly coupled to the retrieval of the data.</p>
            </section>
          </aside> 
        </div>

        <div class="slide transitionSlide" id="pub-sub-title">
          <section class="middle">
            <h2>AmplifyJS Pub / Sub Component</h2>
          </section>
        </div>

        <div class="slide" id="pubSub">
          <header>AmplifyJS Pub / Sub Component</header>
          <section>
            <p>Client Side Component Communication - amplify.publish/subscribe provides a clean, performant API for component to component communication.</p>
            <p>Note: You could use jQuery Custom Events to simulate this interaction, but it is tightly bound to a DOM element and the syntax isn't as graceful when all you want is just a pub/sub component.</p>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>

        <div class="slide" id="publishSub">
          <header>AmplifyJS Pub / Sub API</header>
          <section>
            <h2>Publish a Topic</h2>
<pre>
amplify.publish( string topic, ... )
</pre>
            <ul>
              <li><code>topic</code>: The name of the message to publish</li>
              <li><code>...</code>: Any additional parameters that will be passed to the subscriptions</li>
            </ul>

<pre>
amplify.publish( &quot;contactUpdated&quot;, { 
  firstName: &quot;John&quot;, lastName: &quot;Smith&quot; 
});
</pre>

            <p>The publish will return a boolean indicating whether any subscribers returned false. If a subscriber returns false, then it prevents any additional subscriptions from being invoked.</p>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>

        <div class="slide" id="pubSubscribe">
          <header>AmplifyJS Pub / Sub API…</header>
          <section>
            <h2>Subscribe to a Topic</h2>

<pre>
amplify.subscribe( string topic, function callback )
amplify.subscribe( string topic, object context, function callback )
amplify.subscribe( string topic, function callback, 
  number priority )
amplify.subscribe( string topic, object context, function callback, 
  number priority )
</pre>

            <ul>
              <li><code>topic</code>: Name of the message to subscribe to</li>
              <li><code>context</code>: What this will be when the callback is invoked</li>
              <li><code>callback</code>: Function to invoke when the message is published</li>
              <li><code>priority</code>: Priority relative to other subscriptions for the same message</li>
            </ul>

<pre>
amplify.subscribe( &quot;contactUpdated&quot;, 
  function( contact ) {
    console.log( contact.firstName ); // John
  }, 5 );
</pre>          
            <br /><br /><br />
          </section>
          <aside class="note">
            <section>
              <h2>Remove a subscription</h2>

<pre>
amplify.unsubscribe( string topic, function callback )
</pre>

              <ul>
                <li><code>topic</code>: The topic being unsubscribed from.</li>
                <li><code>callback</code>: The callback that was originally subscribed.</li>
              </ul>
            </section>
          </aside> 
        </div>

        <div class="slide" id="appPubSub">
          <header>Extending with Pub / Sub <a href="http://jsfiddle.net/t5G4n/embedded/js,html,css,result/presentation/" target="_blank">✎</a></header>
          <section>
<pre style="overflow-y: scroll; height: 525px;">
var hackerNews = (function( $, undefined ) {
    var pub = {};

    pub.init = function() {
        $( &quot;#btnRefresh&quot; ).live( &quot;click&quot;, function() {
            pub.getAndDisplayNews();
        });

        <b>amplify.subscribe( &quot;news.updated&quot;, function( news ) {
            displayNews( news );
        });</b>

        <b>amplify.subscribe( &quot;news.updated&quot;, function( news ) {
            displayItemCount( news.items.length );
        });</b>
    };

    pub.getAndDisplayNews = function() {
        $.mobile.pageLoading();  

        getNews( function( data ) {
            <b>amplify.publish( &quot;news.updated&quot;, data );</b>

            $.mobile.pageLoading( true ); 
        });
    };

    function getNews( callback ) { 
        $.ajax({
            url: &quot;http://api.ihackernews.com/page?format=jsonp&quot;,
            dataType: &quot;jsonp&quot;,
            success: function( data, textStatus, jqXHR ) {
                if ( callback ) callback ( data );
            },
            error: function( jqXHR, textStatus, errorThrown ) {
                console.log( textStatus + &quot;: &quot; + errorThrown );
            }
        });                
    }

    function displayNews( news ) {
        var newsList = $( &quot;#hackerNews&quot; ).find( &quot;.newsList&quot; );

        newsList.empty();
        $( &quot;#newsItem&quot; ).tmpl( news.items ).appendTo( newsList );
        newsList.listview( &quot;refresh&quot; );        
    }

    function displayItemCount( count ) {
        $( &quot;#itemCount&quot; ).text( count );    
    }

    return pub;
}( jQuery ));

hackerNews.init();
hackerNews.getAndDisplayNews();
</pre>          
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>

        <div class="slide transitionSlide" id="store-title">
          <section class="middle">
            <h2>AmplifyJS Store Component</h2>
          </section>
        </div>

        <div class="slide" id="store">
          <header>AmplifyJS Store Component…</header>
          <section>
            <h3>Client Side Browser &amp; Mobile Device Storage</h3> 

            <p><code>amplify.store</code> takes the confusion out of HTML5 localStorage. It doesn't get simpler than using <code>amplify.store( key, data )</code>! It even works flawlessly on mobile devices.</p>

            <p><code>amplify.store</code> supports IE 5+, Firefox 2+, Safari 4+, Chrome, Opera 10.5+, iPhone 2+, Android 2+ and provides a consistent API to handle storage cross-browser.</p>

            <br /><br /><br />
            <br /><br /><br />
            <br /><br /><br />
            <br /><br /><br />
          </section>
          <aside class="note">
            <section>
              <p>Various forms of persistance storage have lived around for a very long time...</p>

              <ul>
                <li>localStorage (IE 8+, Firefox 3.5+, Safari 4+, Chrome, Opera 10.5+, iPhone 2+, Android 2+
)</li>
                <li>sessionStorage (IE 8+, Firefox 2+, Safari 4+, Chrome, Opera 10.5+, iPhone 2+, Android 2+
)</li>
                <li>globalStorage (Firefox 2+)</li>
                <li>userData (IE 5 - 7)</li>
              </ul>

              <p></p>
            </section>
          </aside> 
        </div>

        <div class="slide" id="storeSet">
          <header>AmplifyJS Store API</header>
          <section>
            <h2>Set a Value to Storage</h2>
<pre>
amplify.store( string key, mixed value [, hash options ] )
</pre>

            <ul>
              <li><code>key</code>: identifier for the value being store</li>
              <li><code>value</code>: The value to store. The value can be anything that can be serialized as JSON</li>
              <li><code>options (optional)</code>: A set of key/value paris that relate to settings for storing the value (<code>expires</code>)</li>
            </ul>

<pre>
amplify.store( &quot;contact&quot;, { 
  firstName: &quot;John&quot;, lastName: &quot;Smith&quot; 
});
</pre>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>        

        <div class="slide" id="storeGet">
          <header>AmplifyJS Store API</header>
          <section>
            <h2>Get a Value from Storage</h2>

<pre>
amplify.store( string key )
</pre>

            <ul>
              <li><em>key</em>: Identifier for the value stored</li>
            </ul>

<pre>
var contact = ampilfy.store( &quot;contact&quot; );
contact.firstName; // John
</pre>

            <h2>Get a Hash of All Stored Values</h2>

<pre>
amplify.store();

var store = amplify.store();
store.contact.firstName; // John
</pre>          
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   

        <div class="slide" id="appStore">
          <header>Extending with Store <a href="http://jsfiddle.net/FHS65/embedded/js,html,css,result/presentation/" target="_blank">✎</a></header>
          <section>
<pre style="overflow-y: scroll; height: 525px;">
var hackerNews = (function( $, undefined ) {
    var pub = {};

    pub.init = function() {
        $( &quot;#btnRefresh&quot; ).live( &quot;click&quot;, function() {
            pub.getAndDisplayNews();
        });

        amplify.subscribe( &quot;news.updated&quot;, function( news ) {
            displayNews( news );
        });

        amplify.subscribe( &quot;news.updated&quot;, function( news ) {
            displayItemCount( news.items.length );
        });              
    };

    pub.getAndDisplayNews = function() {
        $.mobile.pageLoading();  

        getNews( function( data ) {
            amplify.publish( &quot;news.updated&quot;, data );            
            $.mobile.pageLoading( true ); 
        });
    };

    function getNews( callback ) {
        var <b>news = amplify.store( &quot;news&quot; );</b>

        if ( !news ) {
            $.ajax({
                url: &quot;http://api.ihackernews.com/page?format=jsonp&quot;,
                dataType: &quot;jsonp&quot;,
                success: function( data, textStatus, jqXHR ) {
                    <b>amplify.store( &quot;news&quot;, data, { expires: 5000 } );</b>
                    callback &amp;&amp; callback( data );
                },
                error: function( jqXHR, textStatus, errorThrown ) {
                    console.log( textStatus + &quot;: &quot; + errorThrown );
                }
            });
        } else {
            callback &amp;&amp; callback( news );
        }
    }

    function displayNews( news ) {
        var newsList = $( &quot;#hackerNews&quot; ).find( &quot;.newsList&quot; );

        newsList.empty();
        $( &quot;#newsItem&quot; ).tmpl( news.items ).appendTo( newsList );
        newsList.listview( &quot;refresh&quot; );        
    }

    function displayItemCount( count ) {
        $( &quot;#itemCount&quot; ).text( count );    
    }

    return pub;
}( jQuery ));

hackerNews.init();
hackerNews.getAndDisplayNews();
</pre> 
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>           

        <div class="slide transitionSlide" id="request-title">
          <section class="middle">
            <h2>AmplifyJS Request Component</h2>
          </section>
        </div>

        <div class="slide" id="request">
          <header>AmplifyJS Request Component</header>
          <section>
            <p>The amplify.request component sets out to make data retrieval more maintainable. It does this by separating the definition of a request from the actual request of the data.</p>
            <p>The goal of amplify.request is to abstract the layer of implementation from the actual request and response so that you can minimize code changes to your project.</p>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>  

        <div class="slide" id="requestDefine">
          <header>AmplifyJS Request Define API</header>
          <section>
<pre>
// Define a Request
amplify.request.define(string resourceId, string requestType [, hash settings ]) 
</pre>

            <ul>
              <li><code>resourceId</code>: Identifier string for the resource</li>
              <li><code>requestType</code>: Type of data retrieval method from the server.</li>
              <li><code>settings (optional)</code>: Set of key/value pairs
                <ul>
                  <li>Any settings found in <code>jQuery.ajax()</code></li>
                  <li><code>cache</code>: Different caching algorithms (boolean, number, string)</li>
                  <li><code>decoder</code>: Parse response before calling success or error callback</li>
                </ul>
              </li>
            </ul>

<pre>
amplify.request.define( &quot;getContactDetails&quot;, &quot;ajax&quot;, {
    //AmplifyJS will replace {id} with data passed to it
    url: &quot;/Contact/Details/{id}&quot;, 
    dataType: &quot;json&quot;,
    type: &quot;GET&quot;, 
    //Response will be cached for 15 seconds
    cache: 15000     
});</pre>          
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>  
        
        <div class="slide" id="requestSimple">
          <header>AmplifyJS Request Simple API</header>
          <section>
<pre>
// Simplified Request
amplify.request( string resourceId [, hash data [, function callback ] ] )
</pre>

          <ul>
            <li><code>resourceId</code>: Identifier string for the resource</li>
            <li><code> data (optional)</code>: an object literal of data to be sent to the resource</li>
            <li><code>callback (optional)</code>: a function to call once the resource has been retrieved</li>
          </ul>

<pre>
amplify.request( &quot;getContactDetails&quot;, 
    { id: 4 }, // Resolve URL to &quot;/Contact/Details/4&quot;
    function( data ) {
        console.log( data );
    });
</pre>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>                  

        <div class="slide" id="requestHash">
          <header>AmplifyJS Request Hash API</header>
          <section>
<pre>
// Request with Hash Settings
amplify.request( hash settings )
</pre>

            <ul>
              <li>settings
                <ul>
                  <li><em>resourceId</em>: Identifier string for the resource</li>
                  <li><em>data (optional)</em>: Data associated with the request</li>
                  <li><em>success (optional)</em>: Function to invoke on success</li>
                  <li><em>error (optional)</em>: Function to invoke on error</li>
                </ul>
              </li>
            </ul>

<pre>
amplify.request({ 
    resourceId: &quot;getContactDetails&quot;,
    data: { id: 4 }, // Resolve URL to &quot;/Contact/Details/4&quot;
    success: function( data ) { console.log( data ); },
    error: function( message, level ) { 
      console.log( level + &quot;: &quot; + message ); 
    }
});
</pre>          
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   

        <div class="slide" id="appRequest">
          <header>Extending with Request <a href="http://jsfiddle.net/jdDue/embedded/js,html,css,result/presentation/" target="_blank">✎</a></header>
          <section>
<pre style="overflow-y: scroll; height: 525px;">
<b>amplify.request.define( &quot;getNews&quot;, &quot;ajax&quot;, {
    url: &quot;http://api.ihackernews.com/page?format=jsonp&quot;, 
    dataType: &quot;jsonp&quot;,
    cache: 3000
});</b>  

var hackerNews = (function( $, undefined ) {
    var pub = {};

    pub.init = function() {
        $( &quot;#btnRefresh&quot; ).live( &quot;click&quot;, function() {
            pub.getAndDisplayNews();
        });

        amplify.subscribe( &quot;news.updated&quot;, function( news ) {
            displayNews( news );
        });

        amplify.subscribe( &quot;news.updated&quot;, function( news ) {
            displayItemCount( news.items.length );
        });    
    };

    pub.getAndDisplayNews = function() {
        $.mobile.pageLoading();  

        getNews( function( data ) {
            amplify.publish( &quot;news.updated&quot;, data );            
            $.mobile.pageLoading( true ); 
        });
    };

    function getNews( callback ) {
        <b>amplify.request({
            resourceId: &quot;getNews&quot;,
            success: function( data ) {
                if ( callback ) callback ( data );
            },
            error: function( message, level ) {
                console.log( level + &quot;: &quot; + message );
            }
        });</b>        
    }

    function displayNews( news ) {
        var newsList = $( &quot;#hackerNews&quot; ).find( &quot;.newsList&quot; );

        newsList.empty();
        $( &quot;#newsItem&quot; ).tmpl( news.items ).appendTo( newsList );
        newsList.listview( &quot;refresh&quot; );        
    }

    function displayItemCount( count ) {
        $( &quot;#itemCount&quot; ).text( count );    
    }

    return pub;
}( jQuery ));

hackerNews.init();
hackerNews.getAndDisplayNews();</pre>          
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   
        
        <div class="slide" id="mocking">
          <header>Mocking with AmplifyJS Require</header>
          <section>
            <p>It seems that even those that are aware of the AmplifyJS library <em>aren't</em> aware that you can easily you it to mock the response from your server. Mocking the User Interface interactions can be very beneficial for numerous reasons.</p>

            <p>Let's say that you are working on a client and the back-end RESTful or Web Services are...</p>

            <ul>
              <li>Not yet developed</li>
              <li>Extremely unstable</li>
              <li>Not accessible due to VPN or cross-domain concerns </li>
            </ul>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>                   

        <div class="slide" id="mockingApi">
          <header>Mocking with AmplifyJS Require API</header>
          <section>
            <p>Whatever amplify.request.define is defined last will be used. </p>

<pre>
// Define a Mock Request
amplify.request.define( string resourceId, function response ) 
</pre>

            <ul>
              <li><em>resourceId</em>: Identifier string for the resource (should match previous string)</li>
              <li><em>response</em>: Function that will return either a success or failure response</li>
            </ul>

<pre>
amplify.request.define( &quot;getContactDetails&quot;, function( settings ) {
  settings.success({
    status: &quot;success&quot;,
    contacts: [
      { firstName: &quot;Mike&quot; },
      { firstName: &quot;Jonathan&quot; },
      { firstName: &quot;Scott&quot; }
    ]
  });
});</pre>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   

        <div class="slide" id="appMocking">
          <header>Mocking Hacker News <a href="http://jsfiddle.net/D2egG/embedded/js,html,css,result/presentation/" target="_blank">✎</a></header>
          <section>
<pre style="overflow-y: scroll; height: 525px;">
amplify.request.define( &quot;getNews&quot;, function( settings ) {
    settings.success({
        status: &quot;success&quot;,
        items: [
            {
                commentCount: 1,
                id: 1,
                points: 1,
                postedAgo: &quot;1 hours ago&quot;,
                postedBy: &quot;jkeesh&quot;,
                title: &quot;1 Title&quot;,
                url: &quot;http://1.com&quot;
            },
            {
                commentCount: 2,
                id: 2,
                points: 2,
                postedAgo: &quot;2 hours ago&quot;,
                postedBy: &quot;jkeesh&quot;,
                title: &quot;2 Title&quot;,
                url: &quot;http://2.com&quot;                
            },
            {
                commentCount: 3,
                id: 3,
                points: 3,
                postedAgo: &quot;3 hours ago&quot;,
                postedBy: &quot;jkeesh&quot;,
                title: &quot;3 Title&quot;,
                url: &quot;http://3.com&quot;                
            },
            {
                commentCount: 4,
                id: 4,
                points: 4,
                postedAgo: &quot;1 hours ago&quot;,
                postedBy: &quot;jkeesh&quot;,
                title: &quot;4 Title&quot;,
                url: &quot;http://4.com&quot;                
            },
            {
                commentCount: 5,
                id: 5,
                points: 5,
                postedAgo: &quot;5 hours ago&quot;,
                postedBy: &quot;jkeesh&quot;,
                title: &quot;5 Title&quot;,
                url: &quot;http://5.com&quot;                
            }
        ]
    });
});</pre>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   

        <div class="slide" id="mockingTests">
          <header>Mocking with Unit Tests <a href="http://jsfiddle.net/elijahmanor/2NA3F/embedded/js,html,css,result/presentation/" target="_blank">✎</a></header>
          <section>
<pre style="overflow-y: scroll; height: 525px;">
pavlov.specify.globalApi = true;
pavlov.specify( &quot;News Aggregator&quot;, function() {

    describe( &quot;User Interactions&quot;, function() {

        var button = $( &quot;#btnRefresh&quot; ),
            isUpdated = false, news,
            newsUpdatedCallback = function( data ) {
                isUpdated = true;
                news = data;
            };

        before( function() {
            isUpdated = false;

            hackerNews.init();

            amplify.request.define( &quot;getNews&quot;, function( settings ) {
                settings.success({
                    status: &quot;success&quot;,
                    items: [
                        { commentCount: 5, id: 1, points: 50, postedAgo: &quot;1 hour ago&quot;, postedBy: &quot;davidedicillo&quot;, title: &quot;Five four three...&quot;, url: &quot;http://techcrunch.com/5&quot; }, 
                        { commentCount: 4, id: 2, points: 40, postedAgo: &quot;2 hour ago&quot;, postedBy: &quot;davidedicillo&quot;, title: &quot;Four three two...&quot;, url: &quot;http://techcrunch.com/4&quot; }, 
                        { commentCount: 3, id: 3, points: 30, postedAgo: &quot;3 hour ago&quot;, postedBy: &quot;davidedicillo&quot;, title: &quot;Three two one...&quot;, url: &quot;http://techcrunch.com/3&quot; }, 
                        { commentCount: 2, id: 4, points: 20, postedAgo: &quot;4 hour ago&quot;, postedBy: &quot;davidedicillo&quot;, title: &quot;Two, one, zero...&quot;, url: &quot;http://techcrunch.com/2&quot; }, 
                        { commentCount: 1, id: 5, points: 10, postedAgo: &quot;5 hour ago&quot;, postedBy: &quot;davidedicillo&quot;, title: &quot;One, zero, negative one...&quot;, url: &quot;http://techcrunch.com/1&quot; }
                    ]
                });
            });          

            amplify.subscribe( &quot;news.updated&quot;, newsUpdatedCallback );
        });

        after( function() {
            amplify.unsubscribe( newsUpdatedCallback );
        });

        it( &quot;should publish a news updated message&quot;, function() {
            button.trigger( &quot;click&quot; );
            stop();

            setTimeout( function() {
                start();
                assert( isUpdated ).isTrue();
            }, 2000 );
        });

        it( &quot;should return 5 news items&quot;, function() {
            button.trigger( &quot;click&quot; );
            stop();

            setTimeout( function() {
                start();
                assert( news ).isDefined();
                assert( news.items.length ).isEqualTo(5);
            }, 2000 );
        });

    });

});</pre>         
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   

<!-- 

<li class="slide"><header><h1>Prototyping with MockJSON</h1></header><div class="content"><p><code>mockJSON</code> is a jQuery Plugin that has a valuable templating mechnaism that lets you <em>quickly build up complex set of objects</em> that can be used to quickly prototype your User Interface.</p></div></li>

<li class="slide"><header><h1>MockJSON: Built-in Types</h1></header><div class="content"><pre class="javascript"><code>// Numbers
{ &quot;age|0-99&quot; : 0 } // { &quot;age&quot; : 42 }

// Boolean
{ &quot;married|0-1&quot; : true } // { &quot;married&quot;: false }

// Strings
{ &quot;name&quot; : &quot;@LAST_NAME, @MALE_FIRST_NAME&quot; } // { &quot;name&quot; : &quot;Hall, Kevin&quot; }
{ &quot;initials|1-5&quot; : &quot;@LETTER_UPPER.&quot; } // { &quot;initials&quot;: &quot;V.M.J.&quot; }

// Arrays
{ &quot;contacts|0-3&quot; : [ { &quot;Name&quot; : &quot;@FEMALE_FIRST_NAME&quot; } ] } 
// { &quot;contacts&quot;: [{ Name: &quot;Laura&quot; }, { Name: &quot;Ruth&quot; }] }</code></pre></div></li>

<li class="slide"><header><h1>MockJSON: Custom Types</h1></header><div class="content"><pre class="javascript"><code>// Adding the @US_STATE keyword
$.mockJSON.data.US_STATE = [
    &quot;Alabama&quot;, &quot;Alaska&quot;, ... , &quot;Wisconsin&quot;, &quot;Wyoming&quot;
];
{ &quot;state&quot; : &quot;@US_STATE&quot; } // { &quot;state&quot;: &quot;Alaska&quot; }</code></pre></div></li>

<li class="slide"><header><h1>MockJSON Template Syntax</h1></header><div class="content"><pre class="javascript"><code>$.mockJSON.generateFromTemplate({
    &quot;contacts|2-4&quot;: [{
        &quot;firstName&quot;: &quot;@MALE_FIRST_NAME&quot;,
        &quot;lastName&quot;: &quot;@LAST_NAME&quot;,
        &quot;city&quot;: &quot;@CITY_NAME&quot;,
        &quot;state&quot;: &quot;@STATE_ABBREVIATION&quot;
    }]
});</code></pre></div></li>

<li class="slide"><header><h1>MockJSON'ing Hacker News <a href="http://jsfiddle.net/elijahmanor/bH6pa" target="_blank">✎</a></h1></header><div class="content"><pre class="javascript"><code>amplify.request.define( &quot;getNews&quot;, function( settings ) {
    settings.success($.mockJSON.generateFromTemplate({
        &quot;status&quot;: true,
        &quot;items|20-30&quot;: [
            {
                &quot;id|+1&quot; : 0,
                &quot;commentCount|2-15&quot;: 0,
                &quot;points|20-80&quot;: 0,
                &quot;postedAgo&quot;: &quot;@DATE_MM/@DATE_DD/@DATE_YYYY&quot;,
                &quot;postedBy&quot;: &quot;@MALE_FIRST_NAME @LAST_NAME&quot;,
                &quot;title&quot;: &quot;@LOREM_IPSUM&quot;,
                &quot;url&quot;: &quot;@URL&quot;
            }
        ]
    }));
});

$.mockJSON.data.URL = [
    &quot;http://google.com&quot;, &quot;http://yahoo.com&quot;, &quot;http://microsoft.com&quot;, &quot;http://apple.com&quot;
];</code></pre></div></li>

-->

        <div class="slide" id="refactor">
          <header>Warning: Major Refactor Ahead!</header>
          <section>
            <p>What if our back-end datasource totally change!?! What if instead of always getting a Hacker News feed that our boss came and said, &quot;Why don't you use your same code to pull in any news feed?&quot;. How would you go about doing that?</p>

            <p>AmplifyJS Request is architected in such a way that we can use Uncle Bob's SOLID principle of OCP (The Open Closed Principle) stating that we should be able to extend the behavior, without modifying it.</p>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   

        <div class="slide" id="yql">
          <header>New DataSource: YQL <a href="http://developer.yahoo.com/yql/console/#h=select%20*%20from%20feed%20where%20url%3D%27http%3A//feeds2.feedburner.com/readwriteweb/hack%27%20limit%2010" target="_blank">✎</a></header>
          <section>
            <p>In YQL you an query a RSS or Atom feed and it will proxy the results and make it accessible for you via XML or JSON. </p><p>The following is an example of a query you might use...</p>

            <ul>
              <li>select * from feed where url='http://feeds2.feedburner.com/readwriteweb/hack' limit 10</li>
            </ul>

            <p>The above select query translates into the following encoded URL with all the necessary parameters for the query</p>

            <ul>
              <li>http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20feed%20where%20url%3D'http%3A%2F%2Ffeeds2.feedburner.com%2Freadwriteweb%2Fhack'%20limit%2010&amp;format=json&amp;callback=cbfunc</li>
            </ul>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   

        <div class="slide" id="customRequestType">
          <header>Custom Request Type</header>
          <section>
            <p>In order to start creating our new RSS request type, I usually start by copying the native <code>ajax</code> type that is shipped with AmplifyJS Request and then I tweak out any changes that I need.</p>

            <p>Here is a snippet of what this might look like...</p>

<pre>
amplify.request.types.rss = function( typeSettings ) {
    typeSettings = $.extend({
        type: &quot;GET&quot;,
        dataType: &quot;jsonp&quot;,
        itemsToRetrieve: 5
    }, typeSettings );

    return function( settings, request ) {        
        var url = 
            stringFormat( &quot;http://query.yahooapis.com/v1/public/yql?q={0}&amp;format=json&quot;,
                encodeURIComponent( stringFormat( 
                    &quot;select * from feed where url='{0}' LIMIT {1};&quot;, 
                    typeSettings.url, typeSettings.itemsToRetrieve ) ) ),

    /* ... more code ... */

};
</pre>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>   

        <div class="slide" id="customRequestDecoderFrom">
          <header>Custom Request Decoder</header>
          <section>
            <p>Since the YQL data looks different than the data from Hacker News we will need to map the results from one to the other.</p>

            <p>To do this, we will define a new decoder that will take this format... </p>

<pre>
{
  query: {
    count: 10,
    created: &quot;2011-08-18T04:32:16Z&quot;,
    lang: &quot;en-US&quot;,
    results: {
      item: [
        {
          title: &quot;This is a test title&quot;,
          description: &quot;This is a test description&quot;,
          link: &quot;http://google.com&quot;,
          guid: { isPermaLink: &quot;true&quot;, content: &quot;&quot; },
          category: &quot;TEST&quot;,
          pubDate: &quot;2011-08-18T04:32:16Z&quot;,
          author: &quot;Spider-Manor&quot;,
          origLink: &quot;http://google.com&quot;
        }
      ]
    }
  }
}
</pre>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>  

        <div class="slide" id="customRequestDecoderTo">
          <header>Custom Request Decoder</header>
          <section>
            <p>...and map it to the following format that our web applicaiton is expecting...</p>

<pre>
{
  cachedOnUTC: &quot;/Date(1313643183975)/&quot;
  items: [
    {
      commentCount: 20
      id: 2897740
      points: 81
      postedAgo: &quot;2 hours ago&quot;
      postedBy: &quot;jkeesh&quot;
      title: &quot;Who Does Facebook Think You Are Searching For?&quot;
      url: &quot;http://thekeesh.com/2011/08/who-does-facebook-think-you-are-searching-for/&quot;
    }
  ]
  nextId: &quot;m97628CrNN&quot;
  version: &quot;1.0&quot;
}
</pre>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>  

        <div class="slide" id="customRequestDecoderImpl">
          <header>Custom Request Decoder</header>
          <section>
<pre>
amplify.request.decoders.rssEnvelope = 
    function ( data, status, xhr, success, error ) {
        if ( status === &quot;success&quot; ) {
            success ( { items: transformRssData( data ) } );
        } else if ( status === &quot;fail&quot; || status === &quot;error&quot; ) {
            error( data.message, status );
        } else {
            error( data.message , &quot;fatal&quot; );
        }
    };

function transformRssData( data ) {    
    if ( !data || !data.query || 
         !data.query.results || !data.query.results.item ) { return false; }

    return $.map( data.query.results.item, function(element, index) {
        var date = new Date( element.pubDate );
        return {
            title: element.title,
            url: element.link,
            postedAgo: date.toLocaleDateString() + &quot; &quot; + date.toLocaleTimeString(),
            postedBy: element.author
        };
    });   
}   
</pre>
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>  

        <div class="slide" id="appGeneric">
          <header>Reusable Generic News Reader <a href="http://jsfiddle.net/elijahmanor/rJfaC/embedded/js,html,css,result/presentation/" target="_blank">✎</a></header>
          <section>
            <p>After creating your custom type and decoder you can now change your amplify.request.define to look like the following and you <em>don't</em> have to change the code that actually makes the request!</p>

<pre>
//Define getNews RSS JSONP request using YQL in Amplify Request
amplify.request.define( &quot;getNews&quot;, &quot;rss&quot;, {
    url: &quot;http://feeds2.feedburner.com/readwriteweb/hack&quot;,
    decoder: &quot;rssEnvelope&quot;,
    itemsToRetrieve: 10
});  
</pre>   
          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>  

        <div class="slide" id="whoAmI">
          <header>Questions?</header>
          <section>
            <h3>Elijah Manor</h3>

            <ul>
              <li>ASP.NET MVP, ASPInsider</li>
              <li>Senior Architect at appendTo</li>
            </ul>

            <h3>Referenced Scripts</h3>

            <ul>
              <li>AmplifyJS - http://bit.ly/amplifyjs</li>
              <li>mockJSON - http://bit.ly/mockjson</li>
            </ul>

            <h3>Contact Information</h3>

            <ul>
              <li>elijah.manor@gmail.com</li>
              <li>http://twitter.com/elijahmanor</li>
              <li>http://gplus.to/elijahmanor</li>
            </ul>

          </section>
          <aside class="note">
            <section>
            </section>
          </aside> 
        </div>

      </div> <!-- slides -->
      <div id="speaker-note" class="invisible" style="display: none;">
      </div> <!-- speaker note -->
      <aside id="help" class="sidebar invisible" style="display: hidden;">
        <table>
          <caption>Help</caption>
          <tbody>
            <tr>
              <th>Move Around</th>
              <td>&larr;&nbsp;&rarr;</td>
            </tr>
            <tr>
              <th>Source File</th>
              <td>s</td>
            </tr>
            <tr>
              <th>Change Theme</th>
              <td>t</td>
            </tr>
            <tr>
              <th>Syntax Highlight</th>
              <td>h</td>
            </tr>
            <tr>
              <th>Speaker Notes</th>
              <td>n</td>
            </tr>
            <tr>
              <th>Toggle 3D</th>
              <td>3</td>
            </tr>
            <tr>
              <th>Help</th>
              <td>0</td>
            </tr>
          </tbody>
        </table>
      </aside>
    </div> <!-- presentation -->

    <!--[if lt IE 9]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">
    </script>
    <script>CFInstall.check({ mode: "overlay" });</script>
    <![endif]-->

    <script src="src/prettify/prettify.js" onload="prettyPrint();" defer></script>
    <script src="js/utils.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script>
      // Check if new appcache is available, load it, and reload page.
      if (window.applicationCache) {
        window.applicationCache.addEventListener('updateready', function(e) {
          if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
            window.applicationCache.swapCache();
            if (confirm('A new version of this site is available. Load it?')) {
              window.location.reload();
            }
          }
        }, false);
      }

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-15028909-5']);
      _gaq.push(['_trackPageview']);
      _gaq.push(['_trackPageLoadTime']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>